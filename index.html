<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Large JSON Viewer</title>
<style>
  body { font-family: Arial, sans-serif; margin: 20px; }
  input, button { padding: 8px; font-size: 16px; }
  table { border-collapse: collapse; width: 100%; margin-top: 20px; }
  th, td { border: 1px solid #ccc; padding: 6px; font-size: 14px; }
  th { background: #eee; }
  #status { margin-top: 10px; font-weight: bold; color: green; }
</style>
</head>
<body>
<h2>Massive JSON Viewer (Archive.org Ready)</h2>
<p>Paste the direct JSON URL from Archive.org (or any host):</p>
<input id="jsonUrl" type="text" placeholder="https://archive.org/.../information.json" size="80" />
<button onclick="loadJSON()">Load JSON</button>
<div id="status"></div>

<h3>Data Table</h3>
<table id="dataTable"></table>

<script>
async function loadJSON() {
  const url = document.getElementById("jsonUrl").value.trim();
  if (!url) return alert("Enter a JSON URL first.");

  document.getElementById("status").innerText = "Downloading JSON...";

  try {
    const response = await fetch(url);
    if (!response.ok) throw new Error("HTTP Error " + response.status);

    const text = await response.text();

    document.getElementById("status").innerText = "Parsing JSON... (500MB may take time)";

    let jsonData;
    try {
      jsonData = JSON.parse(text);
    } catch (e) {
      alert("JSON is too large or malformed. Consider splitting into 25MB parts.");
      return;
    }

    document.getElementById("status").innerText = "Rendering table...";
    renderTable(jsonData);
  } catch (err) {
    alert("Error loading JSON: " + err.message);
  }
}

function renderTable(json) {
  const table = document.getElementById("dataTable");
  table.innerHTML = "";

  if (!Array.isArray(json)) {
    const tr = document.createElement("tr");
    tr.innerHTML = `<td>JSON root is not an array. Expected split parts like part_1.json</td>`;
    table.appendChild(tr);
    return;
  }

  const header = document.createElement("tr");
  header.innerHTML = "<th>ID</th><th>Name</th><th>District</th><th>State</th><th>Username</th>";
  table.appendChild(header);

  json.forEach(entry => {
    if (!entry.data) return;
    const d = entry.data;

    const row = document.createElement("tr");
    row.innerHTML = `
      <td>${d.id || ''}</td>
      <td>${d.name || ''}</td>
      <td>${d.district ? d.district.name : ''}</td>
      <td>${d.state ? d.state.name : ''}</td>
      <td>${d.username || ''}</td>
    `;
    table.appendChild(row);
  });

  document.getElementById("status").innerText = "Loaded successfully";
}
</script>
</body>
</html>
